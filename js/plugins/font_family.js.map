/*!
 * froala_editor v3.2.5 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2020 Froala Labs
 */

{"version":3,"file":"font_family.js","sources":["../../../src/js/plugins/font_family.js"],"sourcesContent":["import FE from '../index.js'\n'use strict';\n\n// Extend defaults.\nObject.assign(FE.DEFAULTS, {\n  fontFamily: {\n    'Arial,Helvetica,sans-serif': 'Arial',\n    'Georgia,serif': 'Georgia',\n    'Impact,Charcoal,sans-serif': 'Impact',\n    'Tahoma,Geneva,sans-serif': 'Tahoma',\n    'Times New Roman,Times,serif,-webkit-standard': 'Times New Roman',\n    'Verdana,Geneva,sans-serif': 'Verdana'\n  },\n  fontFamilySelection: false,\n  fontFamilyDefaultSelection: 'Font Family'\n})\n\nFE.PLUGINS.fontFamily = function (editor) {\n  const { $ } = editor\n\n  function apply(val) {\n    editor.format.applyStyle('font-family', val)\n  }\n\n  function refreshOnShow($btn, $dropdown) {\n    $dropdown.find('.fr-command.fr-active').removeClass('fr-active').attr('aria-selected', false)\n    $dropdown.find(`.fr-command[data-param1=\"${_getSelection()}\"]`).addClass('fr-active').attr('aria-selected', true)\n  }\n\n  function _getArray(val) {\n    const font_array = val.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi, '').replace(/\"|'| /g, '').split(',')\n\n    return $(this).grep(font_array, function (txt) { return txt.length > 0 })\n  }\n\n  /**\n   * Return first match position.\n   */\n  function _matches(array1, array2) {\n    for (let i = 0; i < array1.length; i++) {\n      for (let j = 0; j < array2.length; j++) {\n        if (array1[i].toLowerCase() === array2[j].toLowerCase()) {\n          return [i, j]\n        }\n      }\n    }\n\n    return null\n  }\n\n  function _getSelection() {\n    const val = $(editor.selection.element()).css('font-family')\n    const font_array = _getArray(val)\n\n    const font_matches = []\n\n    for (const key in editor.opts.fontFamily) {\n      if (editor.opts.fontFamily.hasOwnProperty(key)) {\n        const c_font_array = _getArray(key)\n\n        const match = _matches(font_array, c_font_array)\n\n        if (match) {\n          font_matches.push([key, match])\n        }\n      }\n    }\n\n    if (font_matches.length === 0) return null\n\n    // Sort matches by their position.\n    // Times,Arial should be detected as being Times, not Arial.\n    font_matches.sort(function (a, b) {\n      const f_diff = a[1][0] - b[1][0]\n\n      if (f_diff === 0) {\n        return a[1][1] - b[1][1]\n      }\n      else {\n        return f_diff\n      }\n    })\n\n    return font_matches[0][0]\n  }\n\n  function refresh($btn) {\n    if (editor.opts.fontFamilySelection) {\n      const val = $(editor.selection.element()).css('font-family').replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi, '').replace(/\"|'|/g, '').split(',')\n\n      $btn.find('> span').text(editor.opts.fontFamily[_getSelection()] || val[0] || editor.language.translate(editor.opts.fontFamilyDefaultSelection))\n    }\n  }\n\n  return {\n    apply: apply,\n    refreshOnShow: refreshOnShow,\n    refresh: refresh\n  }\n}\n\n// Register the font size command.\nFE.RegisterCommand('fontFamily', {\n  type: 'dropdown',\n  displaySelection: function (editor) {\n    return editor.opts.fontFamilySelection\n  },\n  defaultSelection: function (editor) {\n    return editor.opts.fontFamilyDefaultSelection\n  },\n  displaySelectionWidth: 120,\n  html: function () {\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">'\n    const options = this.opts.fontFamily\n\n    for (const val in options) {\n      if (options.hasOwnProperty(val)) {\n        c += `<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\"fontFamily\" data-param1=\"${val}\" \n        style=\"font-family: ${val}\" title=\"${options[val]}\">${options[val]}</a></li>`\n      }\n    }\n    c += '</ul>'\n\n    return c\n  },\n  title: 'Font Family',\n  callback: function (cmd, val) {\n    this.fontFamily.apply(val)\n  },\n  refresh: function ($btn) {\n    this.fontFamily.refresh($btn)\n  },\n  refreshOnShow: function ($btn, $dropdown) {\n    this.fontFamily.refreshOnShow($btn, $dropdown)\n  },\n  plugin: 'fontFamily'\n})\n\n// Add the font size icon.\nFE.DefineIcon('fontFamily', {\n  NAME: 'font',\n  SVG_KEY: 'fontFamily'\n})\n"],"names":["Object","assign","FE","DEFAULTS","fontFamily","fontFamilySelection","fontFamilyDefaultSelection","PLUGINS","editor","$","apply","val","format","applyStyle","refreshOnShow","$btn","$dropdown","find","removeClass","attr","_getSelection","addClass","_getArray","font_array","replace","split","grep","txt","length","_matches","array1","array2","i","j","toLowerCase","selection","element","css","font_matches","key","opts","hasOwnProperty","c_font_array","match","push","sort","a","b","f_diff","refresh","text","language","translate","RegisterCommand","type","displaySelection","defaultSelection","displaySelectionWidth","html","c","options","title","callback","cmd","plugin","DefineIcon","NAME","SVG_KEY"],"mappings":"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"}