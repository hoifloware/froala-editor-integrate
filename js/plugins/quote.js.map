/*!
 * froala_editor v3.2.5 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2020 Froala Labs
 */

{"version":3,"file":"quote.js","sources":["../../../src/js/plugins/quote.js"],"sourcesContent":["import FE from '../index.js'\n'use strict';\n\nFE.PLUGINS.quote = function (editor) {\n\n  const { $ } = editor\n\n  function _deepestParent(node) {\n    while (node.parentNode && node.parentNode != editor.el) {\n      node = node.parentNode \n    }\n\n    return node \n  }\n\n  function _increase() {\n\n    // Get blocks.\n    const blocks = editor.selection.blocks() \n    let i \n\n    // Normalize blocks.\n    for (i = 0; i < blocks.length; i++) {\n      blocks[i] = _deepestParent(blocks[i]) \n    }\n\n    // Save selection to restore it later.\n    editor.selection.save() \n\n    const $quote = $(document.createElement('blockquote')) \n    $quote.insertBefore(blocks[0]) \n\n    for (i = 0; i < blocks.length; i++) {\n      $quote.append(blocks[i]) \n    }\n\n    // Unwrap temp divs.\n    editor.html.unwrap() \n\n    editor.selection.restore() \n  }\n\n  function _decrease() {\n\n    // Get blocks.\n    const blocks = editor.selection.blocks() \n    let i \n\n    for (i = 0; i < blocks.length; i++) {\n      if (blocks[i].tagName != 'BLOCKQUOTE') {\n        blocks[i] = $(blocks[i]).parentsUntil(editor.$el, 'BLOCKQUOTE').get(0) \n      }\n    }\n\n    editor.selection.save() \n\n    for (i = 0; i < blocks.length; i++) {\n      if (blocks[i]) {\n        $(blocks[i]).replaceWith(blocks[i].innerHTML) \n      }\n    }\n\n    // Unwrap temp divs.\n    editor.html.unwrap() \n\n    editor.selection.restore() \n  }\n\n  function apply(val) {\n\n    // Wrap.\n    editor.selection.save() \n    editor.html.wrap(true, true, true, true) \n    editor.selection.restore() \n\n    if (val == 'increase') {\n      _increase() \n    }\n    else if (val == 'decrease') {\n      _decrease() \n    }\n\n\n  }\n\n  return {\n    apply: apply\n  }\n}\n\n// Register the quote command.\nFE.RegisterShortcut(FE.KEYCODE.SINGLE_QUOTE, 'quote', 'increase', '\\'') \nFE.RegisterShortcut(FE.KEYCODE.SINGLE_QUOTE, 'quote', 'decrease', '\\'', true) \nFE.RegisterCommand('quote', {\n  title: 'Quote',\n  type: 'dropdown',\n  html: function () {\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">' \n    const options = {\n      increase: 'Increase',\n      decrease: 'Decrease'\n    } \n\n    for (const val in options) {\n      if (options.hasOwnProperty(val)) {\n        const shortcut = this.shortcuts.get(`quote.${val}`) \n\n        c += `<li role=\"presentation\"><a class=\"fr-command fr-active ${val}\" tabIndex=\"-1\" role=\"option\" data-cmd=\"quote\" data-param1=\"${val}\" title=\"${options[val]}\">${this.language.translate(options[val])}${(shortcut ? `<span class=\"fr-shortcut\">${shortcut}</span>`: '')}</a></li>`\n      }\n    }\n    c += '</ul>' \n\n    return c \n  },\n  callback: function (cmd, val) {\n    this.quote.apply(val) \n  },\n  plugin: 'quote'\n})\n\n// Add the quote icon.\nFE.DefineIcon('quote', {\n  NAME: 'quote-left',\n  SVG_KEY: 'blockquote'\n}) \n"],"names":["FE","PLUGINS","quote","editor","$","_deepestParent","node","parentNode","el","_increase","blocks","selection","i","length","save","$quote","document","createElement","insertBefore","append","html","unwrap","restore","_decrease","tagName","parentsUntil","$el","get","replaceWith","innerHTML","apply","val","wrap","RegisterShortcut","KEYCODE","SINGLE_QUOTE","RegisterCommand","title","type","c","options","increase","decrease","hasOwnProperty","shortcut","shortcuts","language","translate","callback","cmd","plugin","DefineIcon","NAME","SVG_KEY"],"mappings":"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"}