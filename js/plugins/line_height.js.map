/*!
 * froala_editor v3.2.5 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2020 Froala Labs
 */

{"version":3,"file":"line_height.js","sources":["../../../src/js/plugins/line_height.js"],"sourcesContent":["import FE from '../index.js'\n'use strict';\n\nObject.assign(FE.DEFAULTS, {\n  lineHeights: {\n    Default: '',\n    Single: '1',\n    '1.15': '1.15',\n    '1.5': '1.5',\n    Double: '2'\n  }\n})\n\nFE.PLUGINS.lineHeight = function (editor) {\n  const { $ } = editor\n  /**\n   * Apply style.\n   */\n  function apply(val) {\n    editor.selection.save() \n    editor.html.wrap(true, true, true, true) \n    editor.selection.restore() \n\n    const blocks = editor.selection.blocks() \n\n    if (blocks.length && $(blocks[0]).parent().is('td')) {\n      editor.format.applyStyle('line-height', val.toString())\n    }\n\n    // Save selection to restore it later.\n    editor.selection.save() \n\n    for (let i = 0; i < blocks.length; i++) {\n      $(blocks[i]).css('line-height', val)\n\n      if ($(blocks[i]).attr('style') === '') {\n        $(blocks[i]).removeAttr('style') \n      }\n    }\n\n    // Unwrap temp divs.\n    editor.html.unwrap() \n\n    // Restore selection.\n    editor.selection.restore() \n  }\n\n  function refreshOnShow($btn, $dropdown) {\n    const blocks = editor.selection.blocks() \n\n    if (blocks.length) {\n      const $blk = $(blocks[0]) \n\n      $dropdown.find('.fr-command').each(function () {\n        const lineH = $(this).data('param1')\n        const blkStyle = $blk.attr('style')\n        let active = (blkStyle || '').indexOf('line-height: ' + lineH + ';') >= 0\n        \n        // Check if style contains line-height property, when text is pasted from other sources\n        // If not make `default` text selected\n        if (blkStyle) {\n          const lineStyle = blkStyle.substring(blkStyle.indexOf('line-height'))\n          const value  = lineStyle.substr(0, lineStyle.indexOf(';'))\n\n          // get value of line-height\n          const lineHeight = value && value.split(':')[1]\n\n          if ((!lineHeight || !lineHeight.length) && $blk.text() === 'Default') {\n            active = true\n          }\n        }\n\n        // keep `default` text selected always\n        if((!blkStyle || blkStyle.indexOf('line-height') === -1) && lineH === '') {\n          active = true\n        }\n\n        $(this).toggleClass('fr-active', active).attr('aria-selected', active) \n      })\n    }\n  }\n\n  const _init = () => {\n  }\n\n  return {\n    _init: _init,\n    apply: apply,\n    refreshOnShow: refreshOnShow\n  }\n}\n\n// Register the font size command.\nFE.RegisterCommand('lineHeight', {\n  type: 'dropdown',\n  html: function () {\n    let c = '<ul class=\"fr-dropdown-list\" role=\"presentation\">' \n    const { lineHeights : options } = this.opts \n\n    for (const val in options) {\n      if (options.hasOwnProperty(val)) {\n        c += `<li role=\"presentation\"><a class=\"fr-command ${val}\" tabIndex=\"-1\" role=\"option\" data-cmd=\"lineHeight\" data-param1=\"${options[val]}\" title=\"${this.language.translate(val)}\">${this.language.translate(val)}</a></li>` \n      }\n    }\n    c += '</ul>' \n\n    return c \n  },\n  title: 'Line Height',\n  callback: function (cmd, val) {\n    this.lineHeight.apply(val) \n  },\n  refreshOnShow: function ($btn, $dropdown) {\n    this.lineHeight.refreshOnShow($btn, $dropdown) \n  },\n  plugin: 'lineHeight'\n})\n\n// Add the font size icon.\nFE.DefineIcon('lineHeight', {\n  NAME: 'arrows-v',\n  FA5NAME: 'arrows-alt-v',\n  SVG_KEY: 'lineHeight'\n}) \n"],"names":["Object","assign","FE","DEFAULTS","lineHeights","Default","Single","Double","PLUGINS","lineHeight","editor","$","apply","val","selection","save","html","wrap","restore","blocks","length","parent","is","format","applyStyle","toString","i","css","attr","removeAttr","unwrap","refreshOnShow","$btn","$dropdown","$blk","find","each","lineH","data","blkStyle","active","indexOf","lineStyle","substring","value","substr","split","text","toggleClass","_init","RegisterCommand","type","c","options","opts","hasOwnProperty","language","translate","title","callback","cmd","plugin","DefineIcon","NAME","FA5NAME","SVG_KEY"],"mappings":"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"}