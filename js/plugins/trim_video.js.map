/*!
 * froala_editor v3.2.5 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2020 Froala Labs
 */

{"version":3,"file":"trim_video.js","sources":["../../../src/js/plugins/trim_video.js"],"sourcesContent":["import FE from '../index.js'\n\nFE.PLUGINS.trimVideoPlugin = function (editor) {\n\n  let trim_file;\n  let trim_file_index\n  let trim_video_duration\n  let video_edit_httprequest\n  let sValue\n  let sPosition\n  let eValue\n  let ePosition\n  let file_list_trim\n  function _init() {\n     \n  }\nfunction trimVideo(file, index,file_list) {\n    trim_file = file;\n    trim_file_index = index;\n    file_list_trim=file_list\n    renderTrimDiv();\n  }\n   /**\n   * Trim Video Popup \n   */\n  function renderTrimDiv() {\n    const fileURL = URL.createObjectURL(trim_file);\n    const body = editor.o_doc.body;\n    const videoTrimContainer = editor.o_doc.createElement('div');\n    videoTrimContainer.setAttribute('id', 'videoTrimContainer');\n    videoTrimContainer.style.cssText ='position: fixed; top: 0;left: 0;padding: 0;overflow-y:auto;width: 100%;height: 100%;background: rgba(0,0,0,0.4);z-index: 9998;display:block';\n    body.appendChild(videoTrimContainer);\n    const div = document.createElement(\"div\");\n    div.setAttribute('id', 'fr-form-container');\n    div.innerHTML = `\n    <h3 class=\"fr-trim-video-name\"> ${trim_file.name.replace(/\\.[^.]*$/,'')}</h3>\n    <div style='display:block;text-align: center; margin-left:50%;' id='trim-file-loader'></div>\n      <video id='fr-video-edit'  controls>\n       <source src=${fileURL} >\n        Your browser does not support the video tag.\n    </video> \n  `;\n    document.getElementById('videoTrimContainer').appendChild(div);\n    document.getElementById('fr-video-edit').addEventListener('loadedmetadata', function () {\n        trim_video_duration = document.getElementById('fr-video-edit').duration;\n        div.innerHTML += ` \n        \n        <form>\n        <center>\n         <section class=\"fr-range-slider \">\n          <div id=\"startTimeValue\" class=\" fr-range-value-start\"> </div>\n            <input type=\"range\"  class=\"fr-slider\" value='0' min=\"0\" max=${trim_video_duration} id='startTime' >\n          <div  id=\"endTimeValue\" class=\"fr-range-value-end\" ></div>\n            <input type=\"range\"class=\"fr-slider\" value=${trim_video_duration} min='0' max=${trim_video_duration} id='endTime'>\n         <div id=\"selectedRange\"style=\" pointer-events: none; position: absolute;left: 0;top: 12px;width: 100%;\n         outline: none;\n         height: 6px;\n         border-radius: 10px;\"></div>\n            </section>\n        </center>\n        <div class=\"fr-video-trim-buttons\" >\n          <button id='convert' class='fr-trim-button'>${editor.language.translate('Trim')}</button>               \n          <button id='cancel' class='fr-trim-button' onsubmit='cancel()'>${editor.language.translate('Cancel')}</button>\n        </div>\n    </form>\n  `;\n      //for start time bubble\n    const range = document.getElementById('startTime'),\n    rangeV = document.getElementById('startTimeValue'),\n    setValue = ()=>{\n      sValue = Number( (range.value - range.min) * 100 / (range.max - range.min) )\n      sPosition = 10 - (sValue * 0.2);\n      eValue = Number( (range2.value - range2.min) * 100 / (range2.max - range2.min) )\n      ePosition = 10 - (eValue * 0.2);\n      rangeV.innerHTML = `<span>${toHHMMSS(range.value)}</span>`;\n      rangeV.style.left = `calc(${sValue}% + (${sPosition}px))`;\n      // show background ground if on input of start-time\n      selectedRange.style.left=rangeV.style.left\n      selectedRange.style.width=`calc((${eValue}% + (${ePosition}px)) - (${sValue}% + (${sPosition}px)))`\n      selectedRange.style.backgroundColor='#03A9F4'\n    };\n    //for end time bubble\n    document.addEventListener(\"DOMContentLoaded\", setValue);\n    const range2 = document.getElementById('endTime'),\n    rangeV2 = document.getElementById('endTimeValue'),\n    setValue2 = ()=>{\n      sValue = Number( (range.value - range.min) * 100 / (range.max - range.min) )\n      sPosition = 10 - (sValue * 0.2);\n      eValue = Number( (range2.value - range2.min) * 100 / (range2.max - range2.min) ),\n      ePosition = 10 - (eValue * 0.2);\n      rangeV2.innerHTML = `<span>${toHHMMSS(range2.value)}</span>`;\n      rangeV2.style.left = `calc(${eValue}% + (${ePosition}px))`;\n           \n      // show background ground if on input of end-time\n      const selectedRange=document.getElementById('selectedRange')\n      selectedRange.style.left= `calc(${sValue}% + (${sPosition}px))`;\n      selectedRange.style.width=`calc((${eValue}% + (${ePosition}px)) - (${sValue}% + (${sPosition}px)))`\n      selectedRange.style.backgroundColor='#03A9F4'\n    };\n\n    document.addEventListener(\"DOMContentLoaded\", setValue2);\n    document.getElementById('convert').addEventListener('click', trim);\n    document.getElementById('cancel').addEventListener('click', closeContainer);\n    const startTime = document.getElementById('startTime');\n    const endTime = document.getElementById('endTime');\n   \n   //check startTime < endTime \n    startTime.oninput = function (e) {\n      if( Number(startTime.value) >= Number(endTime.value) ){\n        e.preventDefault()\n        startTime.value=String(Number(endTime.value)-1)\n        return false\n      }else{\n        setValue()\n      } \n    }\n      endTime.oninput = function (e) {\n      if(Number(endTime.value) <= Number(startTime.value)){\n        e.preventDefault()\n        endTime.value=String(Number(startTime.value) + 1)\n        return false\n      }else{\n        setValue2()\n      }\n     };\n  });\n\n  }\n\n  /**\n   * Close Trim Video Popup\n   */\n  function closeContainer(event) {\n    event.preventDefault();\n      if(video_edit_httprequest!=null){\n        video_edit_httprequest.abort();\n      }\n      video_edit_httprequest=null\n    let container = document.getElementById('videoTrimContainer');\n    container.parentNode.removeChild(container);\n    editor.filesManager.setChildWindowState(false)\n  } \n   \n  /**\n   * Return time in required format\n   */\n  function toHHMMSS(secs) {\n    const sec_num = parseInt(secs, 10);\n    let hours = Math.floor(sec_num / 3600)?String(Math.floor(sec_num / 3600)):'00';\n    let minutes = Math.floor(sec_num / 60) % 60?String(Math.floor(sec_num / 60) % 60):'00';\n    let seconds = sec_num % 60? String(sec_num % 60):'00';\n    \n    seconds=seconds.length<2?'0'+seconds:seconds\n    minutes=minutes.length<2?'0'+minutes:minutes\n    hours=hours.length<2?'0'+hours:hours\n\n    return hours+\":\"+minutes+\":\"+seconds\n  }\n/**\n   * Send Trim request\n   */\n  function trim(event) {\n    const backedndUrl='http://localhost:3000/convert'\n    event.preventDefault();\n    let startTime = toHHMMSS(document.getElementById(\"startTime\").value);\n    let endTime = toHHMMSS(document.getElementById(\"endTime\").value);\n\n    if(trim_file.constructor === Blob){\n     trim_file = new File([trim_file], trim_file.name, {type:trim_file.type || '', lastModified: trim_file.lastModified});\n    }\n\n    const formData = new FormData();\n    formData.append('startTime', startTime);\n    formData.append('endTime', endTime);\n    formData.append('file', trim_file);\n    const xhr = new XMLHttpRequest();\n    document.getElementById('trim-file-loader').classList.add('fr-file-loader');\n    document.getElementsByClassName('fr-trim-button')[0].style.display = 'none';\n\n    xhr.onload = function () {\n      if (this.status == 200) {\n        let file = new Blob([this.response], {\n          type: this.response.type || '',\n        });\n\n        file.name = trim_file.name;\n        file.lastModified = trim_file.lastModified;\n        file.lastModifiedDate = trim_file.lastModifiedDate;\n        file_list_trim.set(trim_file_index, file);\n          editor.filesManager.upload(\n            file,\n            [],\n            null,\n            trim_file_index\n          ); \n\n        document.getElementById('trim-file-loader').classList.remove('fr-file-loader');\n        document.getElementsByClassName('fr-trim-button')[0].style.display = 'block';\n        let container = document.getElementById('videoTrimContainer');\n        container.parentNode.removeChild(container);\n        editor.filesManager.setChildWindowState(false)\n      }     \n    };\n    xhr.open('POST', backedndUrl, true);\n    xhr.responseType = 'blob';\n    video_edit_httprequest=xhr\n    xhr.send(formData);\n  }\n  return {\n    _init: _init,\n    trimVideo: trimVideo\n  }\n}\n"],"names":["FE","PLUGINS","trimVideoPlugin","editor","trim_file","trim_file_index","trim_video_duration","video_edit_httprequest","sValue","sPosition","eValue","ePosition","file_list_trim","_init","trimVideo","file","index","file_list","renderTrimDiv","fileURL","URL","createObjectURL","body","o_doc","videoTrimContainer","createElement","setAttribute","style","cssText","appendChild","div","document","innerHTML","name","replace","getElementById","addEventListener","duration","language","translate","range","rangeV","setValue","Number","value","min","max","range2","toHHMMSS","left","selectedRange","width","backgroundColor","rangeV2","setValue2","trim","closeContainer","startTime","endTime","oninput","e","preventDefault","String","event","abort","container","parentNode","removeChild","filesManager","setChildWindowState","secs","sec_num","parseInt","hours","Math","floor","minutes","seconds","length","backedndUrl","constructor","Blob","File","type","lastModified","formData","FormData","append","xhr","XMLHttpRequest","classList","add","getElementsByClassName","display","onload","status","response","lastModifiedDate","set","upload","remove","open","responseType","send"],"mappings":";;;;;;;;EAEAA,EAAE,CAACC,OAAH,CAAWC,eAAX,GAA6B,UAAUC,MAAV,EAAkB;EAE7C,MAAIC,SAAJ;EACA,MAAIC,eAAJ;EACA,MAAIC,mBAAJ;EACA,MAAIC,sBAAJ;EACA,MAAIC,MAAJ;EACA,MAAIC,SAAJ;EACA,MAAIC,MAAJ;EACA,MAAIC,SAAJ;EACA,MAAIC,cAAJ;;EACA,WAASC,KAAT,GAAiB;;EAGnB,WAASC,SAAT,CAAmBC,IAAnB,EAAyBC,KAAzB,EAA+BC,SAA/B,EAA0C;EACtCb,IAAAA,SAAS,GAAGW,IAAZ;EACAV,IAAAA,eAAe,GAAGW,KAAlB;EACAJ,IAAAA,cAAc,GAACK,SAAf;EACAC,IAAAA,aAAa;EACd;EACA;EACH;EACA;;;EACE,WAASA,aAAT,GAAyB;EACvB,QAAMC,OAAO,GAAGC,GAAG,CAACC,eAAJ,CAAoBjB,SAApB,CAAhB;EACA,QAAMkB,IAAI,GAAGnB,MAAM,CAACoB,KAAP,CAAaD,IAA1B;EACA,QAAME,kBAAkB,GAAGrB,MAAM,CAACoB,KAAP,CAAaE,aAAb,CAA2B,KAA3B,CAA3B;EACAD,IAAAA,kBAAkB,CAACE,YAAnB,CAAgC,IAAhC,EAAsC,oBAAtC;EACAF,IAAAA,kBAAkB,CAACG,KAAnB,CAAyBC,OAAzB,GAAkC,6IAAlC;EACAN,IAAAA,IAAI,CAACO,WAAL,CAAiBL,kBAAjB;EACA,QAAMM,GAAG,GAAGC,QAAQ,CAACN,aAAT,CAAuB,KAAvB,CAAZ;EACAK,IAAAA,GAAG,CAACJ,YAAJ,CAAiB,IAAjB,EAAuB,mBAAvB;EACAI,IAAAA,GAAG,CAACE,SAAJ,qDACkC5B,SAAS,CAAC6B,IAAV,CAAeC,OAAf,CAAuB,UAAvB,EAAkC,EAAlC,CADlC,qLAIiBf,OAJjB;EAQAY,IAAAA,QAAQ,CAACI,cAAT,CAAwB,oBAAxB,EAA8CN,WAA9C,CAA0DC,GAA1D;EACAC,IAAAA,QAAQ,CAACI,cAAT,CAAwB,eAAxB,EAAyCC,gBAAzC,CAA0D,gBAA1D,EAA4E,YAAY;EACpF9B,MAAAA,mBAAmB,GAAGyB,QAAQ,CAACI,cAAT,CAAwB,eAAxB,EAAyCE,QAA/D;EACAP,MAAAA,GAAG,CAACE,SAAJ,yQAMmE1B,mBANnE,qKAQiDA,mBARjD,0BAQoFA,mBARpF,0XAgBgDH,MAAM,CAACmC,QAAP,CAAgBC,SAAhB,CAA0B,MAA1B,CAhBhD,gHAiBmEpC,MAAM,CAACmC,QAAP,CAAgBC,SAAhB,CAA0B,QAA1B,CAjBnE,gDAFoF;;EAwBxF,UAAMC,KAAK,GAAGT,QAAQ,CAACI,cAAT,CAAwB,WAAxB,CAAd;EAAA,UACAM,MAAM,GAAGV,QAAQ,CAACI,cAAT,CAAwB,gBAAxB,CADT;EAAA,UAEAO,QAAQ,GAAG,SAAXA,QAAW,GAAI;EACblC,QAAAA,MAAM,GAAGmC,MAAM,CAAE,CAACH,KAAK,CAACI,KAAN,GAAcJ,KAAK,CAACK,GAArB,IAA4B,GAA5B,IAAmCL,KAAK,CAACM,GAAN,GAAYN,KAAK,CAACK,GAArD,CAAF,CAAf;EACApC,QAAAA,SAAS,GAAG,KAAMD,MAAM,GAAG,GAA3B;EACAE,QAAAA,MAAM,GAAGiC,MAAM,CAAE,CAACI,MAAM,CAACH,KAAP,GAAeG,MAAM,CAACF,GAAvB,IAA8B,GAA9B,IAAqCE,MAAM,CAACD,GAAP,GAAaC,MAAM,CAACF,GAAzD,CAAF,CAAf;EACAlC,QAAAA,SAAS,GAAG,KAAMD,MAAM,GAAG,GAA3B;EACA+B,QAAAA,MAAM,CAACT,SAAP,mBAA4BgB,QAAQ,CAACR,KAAK,CAACI,KAAP,CAApC;EACAH,QAAAA,MAAM,CAACd,KAAP,CAAasB,IAAb,kBAA4BzC,MAA5B,kBAA0CC,SAA1C,UANa;;EAQbyC,QAAAA,aAAa,CAACvB,KAAd,CAAoBsB,IAApB,GAAyBR,MAAM,CAACd,KAAP,CAAasB,IAAtC;EACAC,QAAAA,aAAa,CAACvB,KAAd,CAAoBwB,KAApB,mBAAmCzC,MAAnC,kBAAiDC,SAAjD,qBAAqEH,MAArE,kBAAmFC,SAAnF;EACAyC,QAAAA,aAAa,CAACvB,KAAd,CAAoByB,eAApB,GAAoC,SAApC;EACD,OAbD,CAxBwF;;;EAuCxFrB,MAAAA,QAAQ,CAACK,gBAAT,CAA0B,kBAA1B,EAA8CM,QAA9C;;EACA,UAAMK,MAAM,GAAGhB,QAAQ,CAACI,cAAT,CAAwB,SAAxB,CAAf;EAAA,UACAkB,OAAO,GAAGtB,QAAQ,CAACI,cAAT,CAAwB,cAAxB,CADV;EAAA,UAEAmB,SAAS,GAAG,SAAZA,SAAY,GAAI;EACd9C,QAAAA,MAAM,GAAGmC,MAAM,CAAE,CAACH,KAAK,CAACI,KAAN,GAAcJ,KAAK,CAACK,GAArB,IAA4B,GAA5B,IAAmCL,KAAK,CAACM,GAAN,GAAYN,KAAK,CAACK,GAArD,CAAF,CAAf;EACApC,QAAAA,SAAS,GAAG,KAAMD,MAAM,GAAG,GAA3B;EACAE,QAAAA,MAAM,GAAGiC,MAAM,CAAE,CAACI,MAAM,CAACH,KAAP,GAAeG,MAAM,CAACF,GAAvB,IAA8B,GAA9B,IAAqCE,MAAM,CAACD,GAAP,GAAaC,MAAM,CAACF,GAAzD,CAAF,CAAf,EACAlC,SAAS,GAAG,KAAMD,MAAM,GAAG,GAD3B;EAEA2C,QAAAA,OAAO,CAACrB,SAAR,mBAA6BgB,QAAQ,CAACD,MAAM,CAACH,KAAR,CAArC;EACAS,QAAAA,OAAO,CAAC1B,KAAR,CAAcsB,IAAd,kBAA6BvC,MAA7B,kBAA2CC,SAA3C,UANc;;EASd,YAAMuC,aAAa,GAACnB,QAAQ,CAACI,cAAT,CAAwB,eAAxB,CAApB;EACAe,QAAAA,aAAa,CAACvB,KAAd,CAAoBsB,IAApB,kBAAkCzC,MAAlC,kBAAgDC,SAAhD;EACAyC,QAAAA,aAAa,CAACvB,KAAd,CAAoBwB,KAApB,mBAAmCzC,MAAnC,kBAAiDC,SAAjD,qBAAqEH,MAArE,kBAAmFC,SAAnF;EACAyC,QAAAA,aAAa,CAACvB,KAAd,CAAoByB,eAApB,GAAoC,SAApC;EACD,OAfD;;EAiBArB,MAAAA,QAAQ,CAACK,gBAAT,CAA0B,kBAA1B,EAA8CkB,SAA9C;EACAvB,MAAAA,QAAQ,CAACI,cAAT,CAAwB,SAAxB,EAAmCC,gBAAnC,CAAoD,OAApD,EAA6DmB,IAA7D;EACAxB,MAAAA,QAAQ,CAACI,cAAT,CAAwB,QAAxB,EAAkCC,gBAAlC,CAAmD,OAAnD,EAA4DoB,cAA5D;EACA,UAAMC,SAAS,GAAG1B,QAAQ,CAACI,cAAT,CAAwB,WAAxB,CAAlB;EACA,UAAMuB,OAAO,GAAG3B,QAAQ,CAACI,cAAT,CAAwB,SAAxB,CAAhB,CA7DwF;;EAgExFsB,MAAAA,SAAS,CAACE,OAAV,GAAoB,UAAUC,CAAV,EAAa;EAC/B,YAAIjB,MAAM,CAACc,SAAS,CAACb,KAAX,CAAN,IAA2BD,MAAM,CAACe,OAAO,CAACd,KAAT,CAArC,EAAsD;EACpDgB,UAAAA,CAAC,CAACC,cAAF;EACAJ,UAAAA,SAAS,CAACb,KAAV,GAAgBkB,MAAM,CAACnB,MAAM,CAACe,OAAO,CAACd,KAAT,CAAN,GAAsB,CAAvB,CAAtB;EACA,iBAAO,KAAP;EACD,SAJD,MAIK;EACHF,UAAAA,QAAQ;EACT;EACF,OARD;;EASEgB,MAAAA,OAAO,CAACC,OAAR,GAAkB,UAAUC,CAAV,EAAa;EAC/B,YAAGjB,MAAM,CAACe,OAAO,CAACd,KAAT,CAAN,IAAyBD,MAAM,CAACc,SAAS,CAACb,KAAX,CAAlC,EAAoD;EAClDgB,UAAAA,CAAC,CAACC,cAAF;EACAH,UAAAA,OAAO,CAACd,KAAR,GAAckB,MAAM,CAACnB,MAAM,CAACc,SAAS,CAACb,KAAX,CAAN,GAA0B,CAA3B,CAApB;EACA,iBAAO,KAAP;EACD,SAJD,MAIK;EACHU,UAAAA,SAAS;EACV;EACD,OARA;EASH,KAlFC;EAoFD;EAED;EACF;EACA;;;EACE,WAASE,cAAT,CAAwBO,KAAxB,EAA+B;EAC7BA,IAAAA,KAAK,CAACF,cAAN;;EACE,QAAGtD,sBAAsB,IAAE,IAA3B,EAAgC;EAC9BA,MAAAA,sBAAsB,CAACyD,KAAvB;EACD;;EACDzD,IAAAA,sBAAsB,GAAC,IAAvB;EACF,QAAI0D,SAAS,GAAGlC,QAAQ,CAACI,cAAT,CAAwB,oBAAxB,CAAhB;EACA8B,IAAAA,SAAS,CAACC,UAAV,CAAqBC,WAArB,CAAiCF,SAAjC;EACA9D,IAAAA,MAAM,CAACiE,YAAP,CAAoBC,mBAApB,CAAwC,KAAxC;EACD;EAED;EACF;EACA;;;EACE,WAASrB,QAAT,CAAkBsB,IAAlB,EAAwB;EACtB,QAAMC,OAAO,GAAGC,QAAQ,CAACF,IAAD,EAAO,EAAP,CAAxB;EACA,QAAIG,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWJ,OAAO,GAAG,IAArB,IAA2BT,MAAM,CAACY,IAAI,CAACC,KAAL,CAAWJ,OAAO,GAAG,IAArB,CAAD,CAAjC,GAA8D,IAA1E;EACA,QAAIK,OAAO,GAAGF,IAAI,CAACC,KAAL,CAAWJ,OAAO,GAAG,EAArB,IAA2B,EAA3B,GAA8BT,MAAM,CAACY,IAAI,CAACC,KAAL,CAAWJ,OAAO,GAAG,EAArB,IAA2B,EAA5B,CAApC,GAAoE,IAAlF;EACA,QAAIM,OAAO,GAAGN,OAAO,GAAG,EAAV,GAAcT,MAAM,CAACS,OAAO,GAAG,EAAX,CAApB,GAAmC,IAAjD;EAEAM,IAAAA,OAAO,GAACA,OAAO,CAACC,MAAR,GAAe,CAAf,GAAiB,MAAID,OAArB,GAA6BA,OAArC;EACAD,IAAAA,OAAO,GAACA,OAAO,CAACE,MAAR,GAAe,CAAf,GAAiB,MAAIF,OAArB,GAA6BA,OAArC;EACAH,IAAAA,KAAK,GAACA,KAAK,CAACK,MAAN,GAAa,CAAb,GAAe,MAAIL,KAAnB,GAAyBA,KAA/B;EAEA,WAAOA,KAAK,GAAC,GAAN,GAAUG,OAAV,GAAkB,GAAlB,GAAsBC,OAA7B;EACD;EACH;EACA;EACA;;;EACE,WAAStB,IAAT,CAAcQ,KAAd,EAAqB;EACnB,QAAMgB,WAAW,GAAC,+BAAlB;EACAhB,IAAAA,KAAK,CAACF,cAAN;EACA,QAAIJ,SAAS,GAAGT,QAAQ,CAACjB,QAAQ,CAACI,cAAT,CAAwB,WAAxB,EAAqCS,KAAtC,CAAxB;EACA,QAAIc,OAAO,GAAGV,QAAQ,CAACjB,QAAQ,CAACI,cAAT,CAAwB,SAAxB,EAAmCS,KAApC,CAAtB;;EAEA,QAAGxC,SAAS,CAAC4E,WAAV,KAA0BC,IAA7B,EAAkC;EACjC7E,MAAAA,SAAS,GAAG,IAAI8E,IAAJ,CAAS,CAAC9E,SAAD,CAAT,EAAsBA,SAAS,CAAC6B,IAAhC,EAAsC;EAACkD,QAAAA,IAAI,EAAC/E,SAAS,CAAC+E,IAAV,IAAkB,EAAxB;EAA4BC,QAAAA,YAAY,EAAEhF,SAAS,CAACgF;EAApD,OAAtC,CAAZ;EACA;;EAED,QAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;EACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,WAAhB,EAA6B9B,SAA7B;EACA4B,IAAAA,QAAQ,CAACE,MAAT,CAAgB,SAAhB,EAA2B7B,OAA3B;EACA2B,IAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBnF,SAAxB;EACA,QAAMoF,GAAG,GAAG,IAAIC,cAAJ,EAAZ;EACA1D,IAAAA,QAAQ,CAACI,cAAT,CAAwB,kBAAxB,EAA4CuD,SAA5C,CAAsDC,GAAtD,CAA0D,gBAA1D;EACA5D,IAAAA,QAAQ,CAAC6D,sBAAT,CAAgC,gBAAhC,EAAkD,CAAlD,EAAqDjE,KAArD,CAA2DkE,OAA3D,GAAqE,MAArE;;EAEAL,IAAAA,GAAG,CAACM,MAAJ,GAAa,YAAY;EACvB,UAAI,KAAKC,MAAL,IAAe,GAAnB,EAAwB;EACtB,YAAIhF,IAAI,GAAG,IAAIkE,IAAJ,CAAS,CAAC,KAAKe,QAAN,CAAT,EAA0B;EACnCb,UAAAA,IAAI,EAAE,KAAKa,QAAL,CAAcb,IAAd,IAAsB;EADO,SAA1B,CAAX;EAIApE,QAAAA,IAAI,CAACkB,IAAL,GAAY7B,SAAS,CAAC6B,IAAtB;EACAlB,QAAAA,IAAI,CAACqE,YAAL,GAAoBhF,SAAS,CAACgF,YAA9B;EACArE,QAAAA,IAAI,CAACkF,gBAAL,GAAwB7F,SAAS,CAAC6F,gBAAlC;EACArF,QAAAA,cAAc,CAACsF,GAAf,CAAmB7F,eAAnB,EAAoCU,IAApC;EACEZ,QAAAA,MAAM,CAACiE,YAAP,CAAoB+B,MAApB,CACEpF,IADF,EAEE,EAFF,EAGE,IAHF,EAIEV,eAJF;EAOF0B,QAAAA,QAAQ,CAACI,cAAT,CAAwB,kBAAxB,EAA4CuD,SAA5C,CAAsDU,MAAtD,CAA6D,gBAA7D;EACArE,QAAAA,QAAQ,CAAC6D,sBAAT,CAAgC,gBAAhC,EAAkD,CAAlD,EAAqDjE,KAArD,CAA2DkE,OAA3D,GAAqE,OAArE;EACA,YAAI5B,SAAS,GAAGlC,QAAQ,CAACI,cAAT,CAAwB,oBAAxB,CAAhB;EACA8B,QAAAA,SAAS,CAACC,UAAV,CAAqBC,WAArB,CAAiCF,SAAjC;EACA9D,QAAAA,MAAM,CAACiE,YAAP,CAAoBC,mBAApB,CAAwC,KAAxC;EACD;EACF,KAvBD;;EAwBAmB,IAAAA,GAAG,CAACa,IAAJ,CAAS,MAAT,EAAiBtB,WAAjB,EAA8B,IAA9B;EACAS,IAAAA,GAAG,CAACc,YAAJ,GAAmB,MAAnB;EACA/F,IAAAA,sBAAsB,GAACiF,GAAvB;EACAA,IAAAA,GAAG,CAACe,IAAJ,CAASlB,QAAT;EACD;;EACD,SAAO;EACLxE,IAAAA,KAAK,EAAEA,KADF;EAELC,IAAAA,SAAS,EAAEA;EAFN,GAAP;EAID,CAlND;;;;"}